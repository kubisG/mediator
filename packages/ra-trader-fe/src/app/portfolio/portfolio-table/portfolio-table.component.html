<mat-card class="detail-card">
    <mat-card-header color="primary">

        <mat-card-title>
            <button matTooltip="Save" mat-icon-button (click)="saveChanges()" [disabled]="disabled">
                <mat-icon>save</mat-icon>
            </button>

            <span class="balance"
                matTooltip="{{ 'opening.balance' | translate }} {{balance | formatBalance : 'opentool'}}">
                <mat-icon>account_balance</mat-icon>{{ prefs.currency.name }}{{balance | formatBalance : 'open'}}
            </span>
            <span class="balance"
                matTooltip="{{ 'unspent.balance' | translate }} {{balance | formatBalance : 'currenttool'}}">
                <mat-icon>attach_money</mat-icon>{{ prefs.currency.name }}{{balance | formatBalance : 'current'}}
            </span>
            <span *ngIf="!account && !showCompany" class="balance" matTooltip="{{ 'current.balance' | translate }}">
                <mat-icon>show_chart</mat-icon>
                {{ prefs.currency.name }}{{ (balance.allBalance + valueBalance) | formatBalance : 'unspent' }}
            </span>
        </mat-card-title>

        <span class="fill-remaining-space"></span>

        <button matTooltip="{{'choose.account' | translate}}" mat-icon-button (click)="openAccount()">
            <mat-icon [ngClass]="{'clicked': account }">list_alt</mat-icon>
        </button>
        <button matTooltip="{{showCompany ? 'User orders' : 'All company orders'}}" mat-icon-button
            (click)="switchCompany()">
            <mat-icon [ngClass]="{'clicked': showCompany }">people</mat-icon>
        </button>
        <button matTooltip="Reload" mat-icon-button (click)="initData(showCompany)">
            <mat-icon *ngIf="valueUpdated" aria-label="Reload">replay</mat-icon>
            <mat-icon *ngIf="!valueUpdated" aria-label="Reload" matBadge="x" matBadgeSize="small"
                matBadgePosition="after" matBadgeOverlap="true" matBadgeColor="accent">replay</mat-icon>
        </button>
        <button matTooltip="{{'butt.save.layout' | translate}}" mat-icon-button (click)="saveState()">
            <mat-icon aria-label="Save">send</mat-icon>
        </button>

    </mat-card-header>

    <mat-card-content>
        <div class="headerGrid" *ngIf="inicialized && orderColumns && initBalance">
                <!-- [sumColumns]="sumColumns" -->            
            <ra-order-grid [key]="'id'" [gridStateKey]="'brokeralloc'" [columns]="orderColumns"
                (rowClick)="rowClickEvent($event)" (rowPrepared)="onRowPrepared($event)"
                (initialized)="onGridInitialized($event)" (rowPushed)="rowPushed($event)"></ra-order-grid>
<!-- 
            <dx-data-grid id="portfolioContainer" [dataSource]="dataSource" [wordWrapEnabled]="false"
                [columns]="orderColumns" [showBorders]="true" [allowColumnReordering]="true"
                [allowColumnResizing]="true" [repaintChangesOnly]="true" [rowAlternationEnabled]="true"
                (onRowClick)="rowClickEvent($event)" (onInitialized)="loadState($event)" [summary]="sumColumns"
                (onRowUpdated)="updated($event)">
                <dxo-export [enabled]="true" fileName="Portfolio"></dxo-export>
                <dxo-column-chooser [enabled]="true" mode="select"> </dxo-column-chooser>
                <dxo-header-filter [visible]="true"></dxo-header-filter>
                <dxo-group-panel [visible]="true"></dxo-group-panel>
                <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
                <dxo-editing mode="batch" [allowUpdating]="true"></dxo-editing>
                <dxo-pager [showPageSizeSelector]="false"></dxo-pager>
                <dxo-summary [recalculateWhileEditing]="true">
                </dxo-summary>

                <div *dxTemplate="let data of 'currPrice'">
                    <ra-symbol-price
                        *ngIf="((symbols && symbols[data.data.Symbol]) || data.data.Symbol === 'Cash Balance')"
                        [cellData]="data" [symbolsData]="symbols"></ra-symbol-price>
                </div>

            </dx-data-grid> -->
        </div>
    </mat-card-content>
</mat-card>
