<mat-card class="detail-card">
  <mat-card-header color="primary">

    <mat-card-title>
        <div *ngIf="!((allocated === orderStatus.Sended) || (allocated === orderStatus.Allocated))">
            <button matTooltip="Save" mat-icon-button (click)="saveChanges()" [disabled]="disabled">
              <mat-icon>save</mat-icon>
            </button>
            <button matTooltip="Add row" mat-icon-button (click)="addRow()">
              <mat-icon>add</mat-icon>
            </button>
            <button *ngIf="rowClick" matTooltip="Remove row" mat-icon-button (click)="removeRow()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
                
      {{ 'order.allocations' | translate }}
    </mat-card-title>
    <span class="fill-remaining-space"></span>

    <button matTooltip="{{'butt.user.reload' | translate}}" mat-icon-button (click)="initData()">
      <mat-icon aria-label="Reload">replay</mat-icon>
    </button>

    <button matTooltip="{{'butt.save.layout' | translate}}" mat-icon-button (click)="saveState()">
      <mat-icon aria-label="Save">send</mat-icon>
    </button>

    <button mat-icon-button (click)="collapsed=!collapsed">
      <mat-icon *ngIf="!collapsed" mat-tooltip="Collapse">keyboard_arrow_down</mat-icon>
      <mat-icon *ngIf="collapsed" mat-tooltip="Uncollapse">keyboard_arrow_right</mat-icon>
    </button>
  </mat-card-header>

  <mat-card-content *ngIf="!collapsed">
    <div class="holder" *ngIf="columns && lists && accounts">
      <ra-data-grid id="allocsContainer" [initColumns]="columns" (initialized)="onInitialized($event)"
        (rowSelected)="rowClickEvent($event)"></ra-data-grid>

    </div>
    <!-- 
    <dx-data-grid id="allocsContainer" [dataSource]="dataSourceControl.dataSource" [wordWrapEnabled]="false"
      [showBorders]="true" [allowColumnReordering]="true" [rowAlternationEnabled]="true" (onInitialized)="onInitialized($event)"
      (onRowClick)="rowClickEvent($event)" [height]="200" (onRowUpdated)="updated($event)" (onRowInserted)="inserted($event)"
      (onCellPrepared)="onCellPrepared($event)" (onRowRemoved)="deleted($event)" (onRowValidating)="rowValidating($event)"
      (onRowPrepared)="onRowPrepared($event)" [allowColumnResizing]="true" (onEditorPreparing)="onEditorPreparing($event)">
      <dxo-editing mode="batch" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="true"></dxo-editing>
      <dxi-column dataField="TransactTime" caption="Latest" dataType="date" format="HH:mm:ss.S" sortOrder="desc" [allowEditing]="false"></dxi-column>
      <dxi-column dataField="AllocAccount">
        <dxo-lookup [dataSource]="accounts" valueExpr="name" displayExpr="name"> </dxo-lookup>
        <dxi-validation-rule type="required"></dxi-validation-rule>
      </dxi-column>
      <dxi-column dataField="AllocShares" dataType="number">
        <dxi-validation-rule type="required" message="Shares must be filled"></dxi-validation-rule>
        <dxi-validation-rule type="range" [min]="0" [max]="9999999999" message="Must be 0 - 9999999999"></dxi-validation-rule>
      </dxi-column>
      <dxi-column dataField="AllocID" [allowEditing]="false"> </dxi-column>
      <dxi-column dataField="Commission" dataType="number"></dxi-column>
      <dxi-column dataField="CommType">
        <dxo-lookup [dataSource]="lists['CommType']" valueExpr="value" displayExpr="name"> </dxo-lookup>
      </dxi-column>
      <dxi-column dataField="AllocText"></dxi-column>
      <dxi-column dataField="AllocStatus" [allowEditing]="false"></dxi-column>
      <dxo-pager [showPageSizeSelector]="false"></dxo-pager>
      <dxo-scrolling mode="virtual" showScrollbar="always"></dxo-scrolling>
    </dx-data-grid> -->
    <!-- <dxi-column dataField="IndividualAllocID" [allowEditing]="false"> </dxi-column>  -->
  </mat-card-content>
</mat-card>
